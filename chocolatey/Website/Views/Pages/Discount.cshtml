@using NuGetGallery
@model DiscountViewModel
@{
    ViewBag.Title = "Special Pricing";
    Bundles.Reference("Scripts/validation");
}
@section TopScripts {
    <script>
        function onSubmit(token) {
            document.getElementById("i-recaptcha").submit();
        }
    </script>
    <script src='https://www.google.com/recaptcha/api.js' async defer></script>
}

<section>
  <div class="p-b p-l">
    <h1 class="m-b">Special Pricing</h1>

    <p class="message">Please fill out the form below to receive discount</p>

    @using (Html.BeginForm())
    {
    <fieldset class="form">
      <legend>Special pricing form</legend>
      @Html.AntiForgeryToken()
      @Html.ValidationSummary(true)

      <div class="form-field">
        @Html.LabelFor(m => m.DiscountType)
        @Html.DropDownListFor(m => m.DiscountType, Model.DiscountTypeItems, "Select...")
        <span class="field-hint-message">What kind of special pricing are you requesting?</span>
        @Html.ValidationMessageFor(m => m.DiscountType)
        @Html.ValidationMessageFor(m => m.SpamValidationResponse)
      </div>
      <div class="form-field">
        @Html.LabelFor(m => m.FirstName)
        @Html.EditorFor(m => m.FirstName)
        <span class="field-hint-message">Enter your first name.</span>
        @Html.ValidationMessageFor(m => m.FirstName)
      </div>
      <div class="form-field">
        @Html.LabelFor(m => m.LastName)
        @Html.EditorFor(m => m.LastName)
        <span class="field-hint-message">Enter your last name.</span>
        @Html.ValidationMessageFor(m => m.LastName)
      </div>
      <div class="form-field">
        @Html.LabelFor(m => m.Email)
        @Html.EditorFor(m => m.Email)
        <span class="field-hint-message">Enter your email address.</span>
        @Html.ValidationMessageFor(m => m.Email)
      </div>

      @*@Html.EditorForModel()*@
      <img src="@Url.Content("~/content/images/required.png")" alt="Blue border on left means required." />

      <input class="g-recaptcha" data-sitekey="@System.Configuration.ConfigurationManager.AppSettings["reCAPTCHA::PublicKey"]" data-callback="onSubmit" data-badge="bottomleft" type="submit" value="Send" title="Send us a message. We'll be in touch soon!" />
    </fieldset>
    }

  </div>
</section>
@section BottomScripts {
    <script type="text/javascript">
        $(document).ready(function () {
            $('fieldset').parent().attr('id', 'i-recaptcha');
        });
    </script>
}
